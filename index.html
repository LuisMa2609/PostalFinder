<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <title>PostalFinder</title>
</head>
<body>

  <div id="offline-notice" class="alert alert-warning alert-dismissible fade show d-none" role="alert">
    No hay conexión. Mostrando los datos del último código postal consultado.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

    <div class="intro">
        <h1 class="logo-header">
            <span class="logo">Postal</span><span class="logo">Finder</span>
        </h1>
    </div>
    
    
    <header>
        <h4>Buscador de codigos postales en México.</h4>
    </header>

      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-6">
            <div class="card my-3">
              <div class="card-body">

                <div class="container">
                  <div class="row">
                    <div class="col-6">

                      <div class="input-group mb-3 d-none">
                        <div class="input-group-prepend">
                          <span class="input-group-text">Token: <a href="javascript:void(0)" onclick="alert('Registrate y obtén tu token en https://api.copomex.com/panel')"> [?] </a></span>
                        </div>
                        <input type="text" class="form-control" placeholder="pruebas" value="pruebas" id="token">
                      </div>
                
                      <div class="input-group input-group-sm mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="inputGroup-sizing-sm">Código Postal:</span>
                        </div>
                        <input type="text" class="form-control" name="codigo_postal" id="codigo_postal">
                      </div>
                      
                      <a href="javascript:void(0)" onclick="informacion_cp()" id="send" class="btn btn-primary">Obtener información Código Postal</a>
                      <br/>


                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            
            <div class="card my-3">
              <div class="card-body">
                <p class="card-text"><form name="estados" id="estados">            
            
                  <label for="cp_response">Código Postal:</label>
                  <input type="text" name="cp_response" id="cp_response" class="form-control" disabled readonly>
                  <br>
            
                  <label for="list_colonias">Colonias:</label>
                  <select name="list_colonias" id="list_colonias" class="form-control">
                    <option>Seleccione</option>
                  </select>
                  <br>
            
                  <label for="tipo_asentamiento">Tipo Asentamiento:</label>
                  <input type="text" name="tipo_asentamiento" id="tipo_asentamiento" class="form-control" disabled readonly>
                  <br>
            
                  <label for="municipio">Municipio:</label>
                  <input type="text" name="municipio" id="municipio" class="form-control" disabled readonly>
                  <br>
            
                  <label for="estado">Estado:</label>
                  <input type="text" name="estado" id="estado" class="form-control" disabled readonly>
                  <br>
            
                  <label for="ciudad">Ciudad:</label>
                  <input type="text" name="ciudad" id="ciudad" class="form-control" disabled readonly>
                  <br>
            
                  <label for="pais">País:</label>
                  <input type="text" name="pais" id="pais" class="form-control" disabled readonly>
                  <br>
            
                </form></p>
              </div>
            </div>
          </div>
        </div>
      </div>

</body>
<script src="app.js"></script>
<script>

    window.addEventListener('load', () => {
        registrarSW();
    });

    async function registrarSW() {
        if('serviceWorker' in navigator) {
            try{
                await navigator
                .serviceWorker
                .register('sw.js');
            }
            catch (e){
                console.log('El SW no pudo ser registrado');
            }
        }
    }


    window.onload = function() {
  Notification.requestPermission().then(function (result){
    if (result === "granted"){
      randomNotification();
    }
  });
}


function randomNotification(){
            var randomItem = Math.floor(Math.random()*1);
            var notifTitle = "PostalFinder";
            var notifBody = "Se han activado las notificaciones";
            var notifImg = "Logo.png";
            var options = {
                body: notifBody,
                icon: notifImg,
            };
            var notif = new Notification(notifTitle, options);
        }

        function notificacion(codigo_postal,imagen){
            setTimeout(() => {}, 15000);
            var randomItem = Math.floor(Math.random()*1);
            var notifTitle = "PostalFinder";
            var notifBody = "Se muestran los detalles del codigo postal " +codigo_postal+ ".";
            var notifImg = "Logo.png";
            var options = {
                body: notifBody,
                icon: notifImg,
            };
            var notif = new Notification(notifTitle, options);
        }


</script>
</html>